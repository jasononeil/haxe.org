language: c
branches:
  only:
  - master
  - staging
  - travis
env:
  HAXE_VER: 3.1.3
  global: 
  matrix:
  - TARGET=neko
matrix:
  fast_finish: true
before_install:
- env
- echo $encrypted_c7c1240b42e4_iv
- openssl aes-256-cbc -K $encrypted_c7c1240b42e4_key -iv $encrypted_c7c1240b42e4_iv
  -in deploy_key.enc -out deploy_key -d
- travis_retry git clone --depth=50 --branch=master git://github.com/waneck/travis-hx.git
  ~/travis-hx
install:
- ~/travis-hx/setup.sh
- cd $TRAVIS_BUILD_DIR
- haxelib install ufront-mvc 1.0.0-rc.11
- haxelib install compiletime 2.5.1
- haxelib install markdown 1.0.0
- haxelib install detox 1.0.0-rc.7
- haxelib install ufront-uftasks 1.0.0-beta.12
- haxelib install ufront
script:
- cd $TRAVIS_BUILD_DIR
after_success:
- haxelib run ufront deploy
- wget http://haxe.org/update/manual/
- wget http://haxe.org/update/site/
addons:
  ssh_known_hosts: haxe.org
